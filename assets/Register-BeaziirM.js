import{r as t,u as y,j as l,N as h,a as x,b as T,c as p,n as w}from"./index-2i_4_wqC.js";import{A as j}from"./AuthForm-DEx9TWQj.js";function N(){const e=t.useRef([]),[o,n]=t.useState(),v=y(),m="https://pensive-volhard-wbilxm8r4.liara.run",[b,i]=t.useState(!1),[u,c]=t.useState({message:"",status:""}),[d,f]=t.useState();t.useEffect(()=>{document.title="ثبت نام کاربر"},[]);const g=async()=>{var r;(r=e==null?void 0:e.current)==null||r.map(a=>{a.value===""?x(s=>{n(s)},a.getAttribute("data-label"),a.value,o,a.type):f(a.value)})};return t.useEffect(()=>{var a;const r=async()=>{try{i(!0);const s=await T.post(`${m}/api/users/register`,{name:e==null?void 0:e.current[0].value,email:e==null?void 0:e.current[1].value,password:e==null?void 0:e.current[2].value,passwordConfirm:e==null?void 0:e.current[3].value});s!==void 0&&(s.data.status==="success"&&p.remove("user-pass"),p.set("user-Token",s.data.token),w("/dashboard","",v))}catch(s){i(!1),s.response.status!==200&&c({message:"خطایی رخ داده",status:"fail"})}};d&&(o&&((a=Object==null?void 0:Object.keys(o))==null?void 0:a.length)==0||o===void 0)&&r()},[d]),l.jsxs(l.Fragment,{children:[u.message&&l.jsx(h,{setNotif:c,notif:u}),l.jsx(j,{fieldes:[{label:"نام",type:"name",valueType:"text"},{label:"ایمیل",type:"email",valueType:"email"},{label:"رمز عبور",type:"password",valueType:"password"},{label:"تکرار رمز عبور",type:"password-confirm",valueType:"password"}],handleBtn:g,headerLabel:"ثبت نام کاربر",inputRefs:e,validation:o,setValidation:n,loading:b,otherLink:[{label:"قبلا ثبت نام کردی؟",link:"/login"}],btnLabel:"ثبت نام"})]})}export{N as default};
