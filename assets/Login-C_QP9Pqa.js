import{r as s,u as h,j as l,N as x,a as y,b as w,c as L,n as T}from"./index-2i_4_wqC.js";import{A as j}from"./AuthForm-DEx9TWQj.js";function E(){const a=s.useRef([]),[t,i]=s.useState(),f=h(),v="https://pensive-volhard-wbilxm8r4.liara.run",[g,u]=s.useState(!1),[c,d]=s.useState({message:"",status:""}),[p,m]=s.useState();s.useEffect(()=>{document.title="ورود کاربر"},[]);const b=async()=>{var o;(o=a==null?void 0:a.current)==null||o.map(e=>{e.value===""?y(r=>{i(r)},e.getAttribute("data-label"),e.value,t,e.type):m(e.value)})};return s.useEffect(()=>{var e;const o=async()=>{var r;try{u(!0);const n=await w.post(`${v}/api/users/login`,{email:a==null?void 0:a.current[0].value,password:a==null?void 0:a.current[1].value},{withCredentials:!0});n!==void 0&&(n.data.status==="success"&&L.remove("user-pass"),T("/dashboard","",f))}catch(n){u(!1),((r=n.response)==null?void 0:r.status)!==200&&d({message:"کاربری با این مشخصات یافت نشد",status:"fail"})}};p&&(t&&((e=Object==null?void 0:Object.keys(t))==null?void 0:e.length)==0||t===void 0)&&o()},[p]),l.jsxs(l.Fragment,{children:[c.message&&l.jsx(x,{setNotif:d,notif:c}),l.jsx(j,{fieldes:[{label:"ایمیل",type:"email",valueType:"email"},{label:"رمز عبور",type:"password",valueType:"password"}],handleBtn:b,headerLabel:"ورود کاربر",inputRefs:a,validation:t,setValidation:i,loading:g,otherLink:[{label:"هنوز ثبت نام نکردی؟",link:"/register"},{label:"رمز عبورتو فراموش کردی؟",link:"/forgetPassword"}],btnLabel:"ورود"})]})}export{E as default};
